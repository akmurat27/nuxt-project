<template>
    <div>
        <swiper />
        <heropage />
        <div class="main-page">
            <div class="image-container">
                <img src="~/assets/infopage/Rectangle 1001126.jpg" class="image">
            </div>
            <div class="gradient"></div>
            <div class="image-text">
                <h1 class="main-text">Анализ загруженности вагонов</h1>
                <p>
                    Hojalyk jemgyýetimiziň demir ýol, deňiz, howa we awtoulag ýük gatnawlaryny öz wagtynda, ýokary derejede amala aşyrmak üçin döwrebap çözgütleri bar. Siz gämi, otly, uçar ýa-da awtoulag bilen ýük gatnawlaryny amala aşyrmak isleýärsiňizmi?! Import, eksport ýa-da üstaşyr ýük gatnawlaryny amala aşyrmakçymy?! Onda size «Hazar logistik» hojalyk jemgyýetiniň hyzmatlary juda zerur 
                </p>
            </div>
        </div>
        <div class="container">
            <div class="news">
                <div>
                    <h1 class="habar">HABARLAR</h1>
                    <div class="gradient"></div>
                </div>
                <span>Ählisini gör</span>   
            </div>
            <div class="cards">
                <div class="card-item">
                    <img src="~/assets/habarlar/Rectangle 167.png">
                    <span>2024-nji ýylda Halkara logistika bazary nähili bolar</span>
                    <p>Pharetra eu lectus pretium aliquet at accumsan. Enim vitae lectus cras tellus imperdiet commodo suscipit elit sollicitudin lectus pretium aliquet at accumsan.....</p>
                </div>
                <div class="card-item-1">
                    <img src="~/assets/habarlar/Rectangle 167 (1).png">
                    <span>2024-nji ýylda Halkara logistika bazary nähili bolar</span>
                    <p>Pharetra eu lectus pretium aliquet at accumsan. Enim vitae lectus cras tellus imperdiet commodo suscipit elit sollicitudin lectus pretium aliquet at accumsan.....</p>
                </div>
                <div class="card-item-2">
                    <img src="~/assets/habarlar/Rectangle 167 (2).png">
                    <span>2024-nji ýylda Halkara logistika bazary nähili bolar</span>
                    <p>Pharetra eu lectus pretium aliquet at accumsan. Enim vitae lectus cras tellus imperdiet commodo suscipit elit sollicitudin lectus pretium aliquet at accumsan.....</p>
                </div>
            </div>
        </div>
        <playvideo />
        <div class="about">
            <img src="~/assets/about/8bb6ee4d7c1d546ec976b0fe9022300f.png">
            <div class="gradient"></div>
            <div ref="numbersContainer" class="image-text">
                <div class="inner-items" ref="numbersContainer">
                    <img src="~/assets/about/Group 1000005717.png">
                    <span class="main-text" ref="number1">0</span>
                    <span>ÝOKARY DEREJELI HÜNÄRMENLERIMIZ</span>
                </div>
                <div class="inner-items" ref="numbersContainer">
                    <img src="~/assets/about/Group 1000005719.png" class="special-1">
                    <span class="main-text" ref="number2">0</span>
                    <span>HYZMATDAŞ <br> ÝURTLARYMYZ</span>
                </div>
                <div class="inner-items" ref="numbersContainer">
                    <img src="~/assets/about/Group 1000005721.png" class="special-2">
                    <span class="main-text" ref="number3">0</span>
                    <span>TÜRKMENISTANDAKY ŞAHAMÇALARYMYZ</span>
                </div>
                <div class="inner-items" ref="numbersContainer">
                    <img src="~/assets/about/Group 1000005722.png">
                    <span class="main-text" ref="number4">0</span>
                    <span>HEMIŞELIK <br> MÜŞDERILERIMIZ</span>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="hyzmatlarymyz">
                <div class="page-1">
                    <span class="habar">Hyzmatlarymyz</span>
                    <div class="gradient"></div>
                </div>
                <div class="box">
                    <div class="service">
                        <div class="change-img"></div>
                        <span class="service-text">Demir yol gatnawy</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                    <div class="service">
                        <img src="~/assets/hyzmatlar/Group 1000005783.png">
                        <span class="service-text">Deniz gatnawy</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                    <div class="service">
                        <img src="~/assets/hyzmatlar/Group 1000005827.png">
                        <span class="service-text">Awtoulag gatnawy</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                    <div class="service">
                        <img src="~/assets/hyzmatlar/Group 1000005830.png">
                        <span class="service-text">Multimodal gatnawlar</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                    <div class="service">
                        <img src="~/assets/hyzmatlar/Group 1000005829.png">
                        <span class="service-text">Konteyner hyzmaty</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                    <div class="service">
                        <img src="~/assets/hyzmatlar/Group 1000005828.png">
                        <span class="service-text">Howa gatnawy</span>
                        <span class="service-p">Ýurdumyzyň iň ygtybarly we elýeterli logistik we ammar hyzmatlary</span>
                        <div class="circle">
                            <img src="~/assets/hyzmatlar/Group 37962.png">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hyzmatdaslar">
            <div class="main-partner">
                <span>Biziň hyzmatdaşlarymyz</span>
            </div>
            <div class="swiper-container" ref="swiperContainer">
                <div class="swiper-wrapper">
                    <!-- Ручное добавление каждого слайда -->
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/path2.png" alt="Logo 1" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/image 9.png" alt="Logo 2" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/Fortune.png" alt="Logo 3" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/Business web.png" alt="Logo 4" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/Mashable.png" alt="Logo 4" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/path2.png" alt="Logo 4" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/path2.png" alt="Logo 1" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/image 9.png" alt="Logo 2" class="logo-image" />
                    </div>
                    <div class="swiper-slide">
                        <img src="~/assets/hyzmatdaslar/Fortune.png" alt="Logo 3" class="logo-image" />
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div id="contact" class="contact">
                <div class="number">
                    <div>
                        <span>Sowallaryňyz üçin bize ýüz tutuň!</span>
                        <p>Esteem spirit temper too say adieus who direct esteem. It look estee luckily or picture placing.</p>
                    </div>
                    <div>
                        <button>+99363 74 62 68</button>
                    </div>
                </div>
                <div class="form">
                    <div class="main-inputs">
                        <input autocomplete="off" name="name" id="name" type="text" placeholder="Your name" class="input-1">
                        <input autocomplete="off" name="password" id="password" type="text" placeholder="Your name" class="input-1">
                        <input autocomplete="off" name="email" id="email" type="email" placeholder="Email" class="input-1">
                        <input autocomplete="off" name="number" id="number" type="text" placeholder="Phone number" class="input-1">
                    </div>
                    <div class="main-input-2">
                        <input autocomplete="off" name="text-field" id="text-field" class="input-2" />
                    </div>
                    <button class="btn">Send Estimate</button>
                </div>
            </div>
        </div>
    </div>
</template>



<script>
import Swiper from 'swiper';
import 'swiper/swiper-bundle.css';

export default {
    name: 'IndexPage',
    data() {
        return {
            targetNumbers: [100, 50, 10, 150],
            duration: 2000,                   
            isAnimated: false,        
        };
    },
    mounted() {
        this.createObserver();  
        this.initializeSwiper();
    },
    methods: {
        createObserver() {
            const options = {
                root: null,           
                threshold: 0.5, 
            };

            const observer = new IntersectionObserver(this.handleIntersect, options);
            observer.observe(this.$refs.numbersContainer); 
        },
        handleIntersect(entries) {
            const entry = entries[0];
            if (entry.isIntersecting && !this.isAnimated) {
                this.isAnimated = true;
                this.animateNumbers();  
            }
            if (!entry.isIntersecting && this.isAnimated) {
                this.isAnimated = false;
                this.resetNumbers();  // Сброс чисел в 0 при выходе из зоны видимости
            }
        },
        animateNumbers() {
            const startTime = performance.now(); 

            const animate = (currentTime) => {
                const elapsedTime = currentTime - startTime; 
                const progress = Math.min(elapsedTime / this.duration, 1); 

                
                this.$refs.number1.textContent = Math.floor(progress * this.targetNumbers[0]);
                this.$refs.number2.textContent = Math.floor(progress * this.targetNumbers[1]);
                this.$refs.number3.textContent = Math.floor(progress * this.targetNumbers[2]);
                this.$refs.number4.textContent = Math.floor(progress * this.targetNumbers[3]);

                if (progress < 1) {
                    requestAnimationFrame(animate); 
                }
            };

            requestAnimationFrame(animate);
        },
        resetNumbers() {
            // Сброс всех чисел в 0
            this.$refs.number1.textContent = 0;
            this.$refs.number2.textContent = 0;
            this.$refs.number3.textContent = 0;
            this.$refs.number4.textContent = 0;
        },

        initializeSwiper() {
            new Swiper(this.$refs.swiperContainer, {
                spaceBetween: 20,
                loop: true,
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                breakpoints: {
                    // When window width is >= 640px
                    640: {
                        slidesPerView: 5,
                    },
                    // When window width is < 640px
                    0: {
                        slidesPerView: 3,
                    },
                },
            });
        },
    },
};
</script>

